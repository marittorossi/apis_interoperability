{
  "swagger": "2.0",
  "info": {
    "title": "business-xapi-services",
    "description": "manage information related to the organization's businesss",
    "version": "v1"
  },
  "host": "business-xapi-services-{env}.us-e2.cloudhub.io",
  "basePath": "/{version}",
  "schemes": [
    "https"
  ],
  "paths": {
    "/partyInteraction": {
      "get": {
        "operationId": "getCustomerInteractions",
        "description": "view customer interactions",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "ORIGIN",
            "description": "Parameter that allows the origin of the request to be identified",
            "required": true,
            "in": "query",
            "type": "string"
          },
          {
            "name": "INTERACTION_ID",
            "description": "Number Interaction",
            "required": false,
            "in": "query",
            "type": "string"
          },
          {
            "name": "FILTERS",
            "description": "String used to apply filters to the query (follow example), separate the filter type and its value with a colon, and separate the number of filters with a semicolon.",
            "required": false,
            "in": "query",
            "type": "string"
          },
          {
            "name": "LIMIT",
            "description": "Limit on orders to display",
            "required": false,
            "in": "query",
            "type": "number"
          },
          {
            "name": "OFFSET",
            "description": "used to organize information and establish a logical order",
            "required": false,
            "in": "query",
            "type": "string"
          },
          {
            "name": "name",
            "description": "System of origin of the request.",
            "required": false,
            "in": "header",
            "type": "string"
          },
          {
            "name": "X-CORRELATION-ID",
            "description": "Optional Correlation ID to be overwritten when sent the request as a transaction identifier",
            "required": false,
            "in": "header",
            "type": "string"
          },
          {
            "name": "source",
            "description": "Destination of the request.",
            "required": false,
            "in": "header",
            "type": "string"
          },
          {
            "name": "systemId",
            "description": "Auditing logs system identifier. Used for internal communication.",
            "required": true,
            "in": "header",
            "enum": [
              "MIGRACION",
              "TRANSACCCIONES_OM",
              "MAYORISTAS",
              "OTINICIATIVAS"
            ],
            "type": "string"
          },
          {
            "name": "processName",
            "description": "Auditing logs process name. Used for internal communication",
            "required": false,
            "in": "header",
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "x-amf-mediaType": "application/json",
            "schema": {
              "$ref": "#/definitions/type"
            }
          },
          "400": {
            "description": "",
            "x-amf-mediaType": "application/json",
            "schema": {
              "$ref": "#/definitions/type_1"
            }
          },
          "401": {
            "description": "",
            "x-amf-mediaType": "application/json",
            "schema": {
              "$ref": "#/definitions/type_1"
            }
          },
          "404": {
            "description": "",
            "x-amf-mediaType": "application/json",
            "schema": {
              "$ref": "#/definitions/type_1"
            }
          },
          "500": {
            "description": "",
            "x-amf-mediaType": "application/json",
            "schema": {
              "$ref": "#/definitions/type_1"
            }
          }
        },
        "security": [
          {
            "etb_oauth_2_0": []
          }
        ]
      },
      "post": {
        "operationId": "createInteraction",
        "description": "operation that allows you to update the terms and conditions",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "ORIGIN",
            "description": "Parameter that allows the origin of the request to be identified",
            "required": true,
            "in": "query",
            "type": "string"
          },
          {
            "name": "name",
            "description": "System of origin of the request.",
            "required": false,
            "in": "header",
            "type": "string"
          },
          {
            "name": "X-CORRELATION-ID",
            "description": "Optional Correlation ID to be overwritten when sent the request as a transaction identifier",
            "required": false,
            "in": "header",
            "type": "string"
          },
          {
            "name": "source",
            "description": "Destination of the request.",
            "required": false,
            "in": "header",
            "type": "string"
          },
          {
            "name": "systemId",
            "description": "Auditing logs system identifier. Used for internal communication.",
            "required": true,
            "in": "header",
            "enum": [
              "MIGRACION",
              "TRANSACCCIONES_OM",
              "MAYORISTAS",
              "OTINICIATIVAS"
            ],
            "type": "string"
          },
          {
            "name": "processName",
            "description": "Auditing logs process name. Used for internal communication",
            "required": false,
            "in": "header",
            "type": "string"
          },
          {
            "x-amf-mediaType": "application/json",
            "in": "body",
            "name": "generated",
            "schema": {
              "$ref": "#/definitions/type_2"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "x-amf-mediaType": "application/json",
            "schema": {
              "$ref": "#/definitions/type_3"
            }
          },
          "400": {
            "description": "",
            "x-amf-mediaType": "application/json",
            "schema": {
              "$ref": "#/definitions/type_1"
            }
          },
          "401": {
            "description": "",
            "x-amf-mediaType": "application/json",
            "schema": {
              "$ref": "#/definitions/type_1"
            }
          },
          "404": {
            "description": "",
            "x-amf-mediaType": "application/json",
            "schema": {
              "$ref": "#/definitions/type_1"
            }
          },
          "500": {
            "description": "",
            "x-amf-mediaType": "application/json",
            "schema": {
              "$ref": "#/definitions/type_1"
            }
          }
        },
        "security": [
          {
            "etb_oauth_2_0": []
          }
        ]
      }
    },
    "/partyInteraction/{id}": {
      "patch": {
        "operationId": "updateInteraction",
        "description": "operation that allows you to update the terms and conditions",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "ORIGIN",
            "description": "Parameter that allows the origin of the request to be identified",
            "required": true,
            "in": "query",
            "type": "string"
          },
          {
            "name": "id",
            "required": true,
            "in": "path",
            "type": "string"
          },
          {
            "name": "name",
            "description": "System of origin of the request.",
            "required": false,
            "in": "header",
            "type": "string"
          },
          {
            "name": "source",
            "description": "Destination of the request.",
            "required": false,
            "in": "header",
            "type": "string"
          },
          {
            "name": "X-CORRELATION-ID",
            "description": "Optional Correlation ID to be overwritten when sent the request as a transaction identifier",
            "required": false,
            "in": "header",
            "type": "string"
          },
          {
            "name": "systemId",
            "description": "Auditing logs system identifier. Used for internal communication.",
            "required": true,
            "in": "header",
            "enum": [
              "MIGRACION",
              "TRANSACCCIONES_OM",
              "MAYORISTAS",
              "OTINICIATIVAS"
            ],
            "type": "string"
          },
          {
            "name": "processName",
            "description": "Auditing logs process name. Used for internal communication",
            "required": false,
            "in": "header",
            "type": "string"
          },
          {
            "x-amf-mediaType": "application/json",
            "in": "body",
            "name": "generated",
            "schema": {
              "$ref": "#/definitions/type_4"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "x-amf-mediaType": "application/json",
            "schema": {
              "$ref": "#/definitions/type_5"
            }
          },
          "400": {
            "description": "",
            "x-amf-mediaType": "application/json",
            "schema": {
              "$ref": "#/definitions/type_1"
            }
          },
          "401": {
            "description": "",
            "x-amf-mediaType": "application/json",
            "schema": {
              "$ref": "#/definitions/type_1"
            }
          },
          "404": {
            "description": "",
            "x-amf-mediaType": "application/json",
            "schema": {
              "$ref": "#/definitions/type_1"
            }
          },
          "500": {
            "description": "",
            "x-amf-mediaType": "application/json",
            "schema": {
              "$ref": "#/definitions/type_1"
            }
          }
        },
        "security": [
          {
            "etb_oauth_2_0": []
          }
        ]
      }
    },
    "/createSurvey": {
      "post": {
        "operationId": "createSurvey",
        "description": "register survey",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "ORIGIN",
            "description": "Parameter that allows the origin of the request to be identified",
            "required": true,
            "in": "query",
            "type": "string"
          },
          {
            "name": "name",
            "description": "System of origin of the request.",
            "required": false,
            "in": "header",
            "type": "string"
          },
          {
            "name": "X-CORRELATION-ID",
            "description": "Optional Correlation ID to be overwritten when sent the request as a transaction identifier",
            "required": false,
            "in": "header",
            "type": "string"
          },
          {
            "name": "source",
            "description": "Destination of the request.",
            "required": false,
            "in": "header",
            "type": "string"
          },
          {
            "name": "systemId",
            "description": "Auditing logs system identifier. Used for internal communication.",
            "required": true,
            "in": "header",
            "enum": [
              "MIGRACION",
              "TRANSACCCIONES_OM",
              "MAYORISTAS",
              "OTINICIATIVAS"
            ],
            "type": "string"
          },
          {
            "name": "processName",
            "description": "Auditing logs process name. Used for internal communication",
            "required": false,
            "in": "header",
            "type": "string"
          },
          {
            "x-amf-mediaType": "application/json",
            "in": "body",
            "name": "generated",
            "schema": {
              "$ref": "#/definitions/type_6"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "x-amf-mediaType": "application/json",
            "schema": {
              "$ref": "#/definitions/type_7"
            }
          },
          "400": {
            "description": "",
            "x-amf-mediaType": "application/json",
            "schema": {
              "$ref": "#/definitions/type_1"
            }
          },
          "401": {
            "description": "",
            "x-amf-mediaType": "application/json",
            "schema": {
              "$ref": "#/definitions/type_1"
            }
          },
          "404": {
            "description": "",
            "x-amf-mediaType": "application/json",
            "schema": {
              "$ref": "#/definitions/type_1"
            }
          },
          "500": {
            "description": "",
            "x-amf-mediaType": "application/json",
            "schema": {
              "$ref": "#/definitions/type_1"
            }
          }
        },
        "security": [
          {
            "etb_oauth_2_0": []
          }
        ]
      }
    }
  },
  "definitions": {
    "type": {
      "example": {
        "responseCode": "200",
        "responseMessage": "",
        "interactions": [
          {
            "client": {
              "firstNames": "Carlos",
              "lastNames": "García",
              "documentType": "CC",
              "documentNumber": "987654321",
              "email": "carlos.garcia@example.com"
            },
            "accesses": [
              {
                "action": "consulta de saldo",
                "channel": "app móvil",
                "date": "2025-07-23T09:30:00Z"
              },
              {
                "action": "pago de factura",
                "channel": "web",
                "date": "2025-07-22T15:10:00Z"
              }
            ]
          },
          {
            "client": {
              "firstNames": "María",
              "lastNames": "López",
              "documentType": "CE",
              "documentNumber": "1122334455",
              "email": "maria.lopez@example.com"
            },
            "accesses": [
              {
                "action": "actualización de datos",
                "channel": "sucursal",
                "date": "2025-07-20T11:00:00Z"
              }
            ]
          }
        ]
      },
      "type": "object",
      "required": [
        "interactions"
      ],
      "properties": {
        "responseCode": {
          "example": "200",
          "type": "string"
        },
        "responseMessage": {
          "example": "",
          "type": "string"
        },
        "interactions": {
          "type": "array",
          "items": {
            "type": "object",
            "required": [
              "client",
              "accesses"
            ],
            "properties": {
              "client": {
                "type": "object",
                "properties": {
                  "firstNames": {
                    "example": "Carlos",
                    "type": "string"
                  },
                  "lastNames": {
                    "example": "García",
                    "type": "string"
                  },
                  "documentType": {
                    "example": "CC",
                    "type": "string"
                  },
                  "documentNumber": {
                    "example": "987654321",
                    "type": "string"
                  },
                  "email": {
                    "example": "carlos.garcia@example.com",
                    "type": "string"
                  }
                }
              },
              "accesses": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "action": {
                      "example": "consulta de saldo",
                      "type": "string"
                    },
                    "channel": {
                      "example": "app móvil",
                      "type": "string"
                    },
                    "date": {
                      "example": "2025-07-23T09:30:00Z",
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "type_1": {
      "x-amf-examples": {
        "example_0": {
          "status": 400,
          "code": "REQUEST_ERROR",
          "message": {
            "message": "Required query parameter document not specified"
          },
          "messageServer": "",
          "cause": [
            {
              "origin": "XXX-xapi-services",
              "message": "org.mule.module.apikit.api.exception.InvalidQueryParameterException"
            }
          ]
        },
        "example_1": {
          "status": 401,
          "code": "Unauthorized",
          "message": {
            "message": "Invalid token"
          },
          "messageServer": "",
          "cause": [
            {
              "origin": "XXX-xapi-services",
              "message": ""
            }
          ]
        },
        "amf_example_1": {
          "status": 404,
          "code": "NOT_FOUND",
          "message": {
            "message": "Resource not found "
          },
          "messageServer": "",
          "cause": [
            {
              "origin": "XXX-xapi-services",
              "message": ""
            }
          ]
        },
        "amf_example_2": {
          "status": 500,
          "code": "INTERNAL_SERVER_ERROR",
          "message": {
            "message": "Server Internal Error "
          },
          "messageServer": "",
          "cause": [
            {
              "origin": "XXX-xapi-services",
              "message": ""
            }
          ]
        }
      },
      "type": "object",
      "required": [
        "message",
        "cause"
      ],
      "properties": {
        "status": {
          "example": 400,
          "type": "integer"
        },
        "code": {
          "example": "REQUEST_ERROR",
          "type": "string"
        },
        "message": {
          "type": "object",
          "properties": {
            "message": {
              "example": "Required query parameter document not specified",
              "type": "string"
            }
          }
        },
        "messageServer": {
          "example": "",
          "type": "string"
        },
        "cause": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "origin": {
                "example": "XXXX-xapi-services",
                "type": "string"
              },
              "message": {
                "example": "org.mule.module.apikit.api.exception.InvalidQueryParameterException",
                "type": "string"
              }
            }
          }
        }
      }
    },
    "type_2": {
      "example": {
        "subscription": {
          "client": {
            "documentNumber": "1234567890",
            "documentType": "CC"
          },
          "acceptsTermsAndConditions": true
        }
      },
      "type": "object",
      "required": [
        "subscription"
      ],
      "properties": {
        "subscription": {
          "type": "object",
          "required": [
            "client"
          ],
          "properties": {
            "client": {
              "type": "object",
              "properties": {
                "documentNumber": {
                  "example": "1234567890",
                  "type": "string"
                },
                "documentType": {
                  "example": "CC",
                  "type": "string"
                }
              }
            },
            "acceptsTermsAndConditions": {
              "example": true,
              "type": "boolean"
            }
          }
        }
      }
    },
    "type_3": {
      "type": "object",
      "required": [
        "message",
        "cause"
      ],
      "properties": {
        "status": {
          "example": 200,
          "type": "integer"
        },
        "code": {
          "example": "Ok",
          "type": "string"
        },
        "message": {
          "type": "object",
          "properties": {
            "message": {
              "example": "Se actualizó la decisión de términos y condiciones",
              "type": "string"
            }
          }
        },
        "messageServer": {
          "example": "",
          "type": "string"
        },
        "cause": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "origin": {
                "example": "",
                "type": "string"
              },
              "message": {
                "example": "",
                "type": "string"
              }
            }
          }
        }
      }
    },
    "type_4": {
      "example": {
        "value": {
          "subscription": {
            "client": {
              "documentNumber": "1234567890",
              "documentType": "CC",
              "names": "sdff",
              "lastNames": "sdfsdf",
              "email": "sdfsdf@sdfsdf.com"
            },
            "acces": {
              "name": "",
              "parameters": [
                {
                  "parameter": "",
                  "value": ""
                }
              ]
            },
            "acceptsTermsAndConditions": true
          }
        }
      },
      "type": "object",
      "required": [
        "subscription"
      ],
      "properties": {
        "subscription": {
          "type": "object",
          "required": [
            "client",
            "acces"
          ],
          "properties": {
            "client": {
              "type": "object",
              "properties": {
                "documentNumber": {
                  "example": "1234567890",
                  "type": "string"
                },
                "documentType": {
                  "example": "CC",
                  "type": "string"
                },
                "names": {
                  "example": "sdff",
                  "type": "string"
                },
                "lastNames": {
                  "example": "sdfsdf",
                  "type": "string"
                },
                "email": {
                  "example": "sdfsdf@sdfsdf.com",
                  "type": "string"
                }
              }
            },
            "acces": {
              "type": "object",
              "required": [
                "parameters"
              ],
              "properties": {
                "name": {
                  "example": "",
                  "type": "string"
                },
                "parameters": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "parameter": {
                        "example": "",
                        "type": "string"
                      },
                      "value": {
                        "example": "",
                        "type": "string"
                      }
                    }
                  }
                }
              }
            },
            "acceptsTermsAndConditions": {
              "example": true,
              "type": "boolean"
            }
          }
        }
      }
    },
    "type_5": {
      "type": "object",
      "required": [
        "message",
        "cause"
      ],
      "properties": {
        "status": {
          "example": "200",
          "type": "string"
        },
        "code": {
          "example": "Ok",
          "type": "string"
        },
        "message": {
          "type": "object",
          "properties": {
            "message": {
              "example": "Se actualizó la interaccion",
              "type": "string"
            }
          }
        },
        "messageServer": {
          "example": "",
          "type": "string"
        },
        "cause": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "origin": {
                "example": "",
                "type": "string"
              },
              "message": {
                "example": "",
                "type": "string"
              }
            }
          }
        }
      }
    },
    "type_6": {
      "example": {
        "reasonSurvey": "motivo encuesta",
        "trackingNumber": "numero seguimiento",
        "customer": {
          "documentNumber": "79657111",
          "documentType": "CC"
        },
        "survey": [
          {
            "question": "Origen",
            "answer": "ENCUESTA_BOT"
          },
          {
            "question": "Origen",
            "answer": "ENCUESTA_BOT"
          },
          {
            "question": "Origen",
            "answer": "ENCUESTA_BOT"
          }
        ]
      },
      "type": "object",
      "required": [
        "customer",
        "survey"
      ],
      "properties": {
        "reasonSurvey": {
          "example": "motivo encuesta",
          "type": "string"
        },
        "trackingNumber": {
          "example": "numero seguimiento",
          "type": "string"
        },
        "customer": {
          "type": "object",
          "properties": {
            "documentNumber": {
              "example": "79657111",
              "type": "string"
            },
            "documentType": {
              "example": "CC",
              "type": "string"
            }
          }
        },
        "survey": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "question": {
                "example": "Origen",
                "type": "string"
              },
              "answer": {
                "example": "ENCUESTA_BOT",
                "type": "string"
              }
            }
          }
        }
      }
    },
    "type_7": {
      "type": "object",
      "required": [
        "message",
        "cause"
      ],
      "properties": {
        "status": {
          "example": 200,
          "type": "integer"
        },
        "code": {
          "example": "Ok",
          "type": "string"
        },
        "message": {
          "type": "object",
          "properties": {
            "message": {
              "example": "Se registro la encuesta satisfactoriamente",
              "type": "string"
            }
          }
        },
        "messageServer": {
          "example": "",
          "type": "string"
        },
        "cause": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "origin": {
                "example": "",
                "type": "string"
              },
              "message": {
                "example": "",
                "type": "string"
              }
            }
          }
        }
      }
    }
  },
  "securityDefinitions": {
    "etb_oauth_2_0": {
      "type": "oauth2",
      "x-amf-describedBy": {
        "headers": {
          "Authorization": {
            "description": "Used to send a valid OAuth 2 access token. Do not use\nwith the \"access_token\" query string parameter.\n",
            "type": "string"
          }
        },
        "queryParameters": {
          "access_token": {
            "description": "Used to send a valid OAuth 2 access token. Do not use together with\nthe \"Authorization\" header\n"
          },
          "type": {
            "type": "string"
          }
        },
        "responses": {
          "401": {
            "description": "Bad or expired token. This can happen if the user or Dropbox\nrevoked or expired an access token. To fix, you should re-\nauthenticate the user.\n",
            "body": {}
          },
          "403": {
            "description": "Bad OAuth request (wrong consumer key, bad nonce, expired\ntimestamp...). Unfortunately, re-authenticating the user won't help here.\n",
            "body": {}
          }
        }
      },
      "tokenUrl": "https://oauth-etb-security-services.us-e2.cloudhub.io/security/v1/access_token",
      "flow": "application",
      "scopes": {
        "*": ""
      },
      "x-amf-settings": {
        "authorizationGrants": [
          "client_credentials",
          "authorization_code",
          "password"
        ]
      }
    }
  }
}
