{
  "openapi": "3.0.3",
  "info": {
    "title": "common-xapi-services",
    "description": "## API Overview\n\n**Architecture Layer:** Experience Layer (XAPI) - Part of ETB's API-led connectivity architecture\n\n**Service Name:** common-xapi-services\n**Total Operations:** 4\n**Documentation Quality:** 60% RAML Coverage\n\n## Core Capabilities\n\nThe API supports the ability to send requests to create a new trouble ticket specifying the nature and severity of the trouble or issue as well as all necessary related information.\n\n## Standards Compliance\n\n- OpenAPI 3.0.3 Specification\n- ETB API Design Guidelines\n- OAuth 2.0 Security Standards\n- RESTful API Design Principles\n- TM Forum Open APIs Compliance\n\n## Mock Server Information\n\nThis specification includes mock examples for all operations to facilitate API testing and integration development without requiring live backend connectivity.",
    "version": "v1",
    "contact": {
      "name": "ETB API Team",
      "url": "https://www.etb.com.co",
      "email": "api-support@etb.com.co"
    },
    "license": {
      "name": "Proprietary - ETB"
    },
    "x-language": "en",
    "x-compliance": "TM Forum Open APIs"
  },
  "servers": [
    {
      "url": "https://mock-common-xapi-services.etb-apis.com",
      "description": "Mock Server - Documentation and Testing"
    },
    {
      "url": "https://common-xapi-services-prod.us-e2.cloudhub.io",
      "description": "Production Server - Live Environment"
    },
    {
      "url": "https://common-xapi-services-qa.us-e2.cloudhub.io",
      "description": "QA Test Server - Validation Environment"
    }
  ],
  "paths": {
    "/troubleTicket": {
      "get": {
        "operationId": "get_troubleTicket",
        "summary": "Retrieve Troubleticket",
        "description": "The GET /troubleTicket operation retrieves trouble ticket details within ETB's common-xapi-services.  This RESTful API endpoint is crucial for ETB's internal systems and external partner integrations.  Business use cases include:\n\n* **Customer Service Representatives:** Accessing real-time ticket status and details to efficiently resolve customer issues related to broadband, landline, or mobile services.  This allows for faster troubleshooting and improved customer satisfaction.\n\n* **Network Operations Center (NOC):** Monitoring and managing network outages reflected in trouble tickets, enabling proactive intervention and minimizing service disruptions.\n\n* **Billing System Integration:**  Automating billing adjustments based on resolved trouble tickets, ensuring accurate invoicing and minimizing disputes.\n\n* **Third-party Vendor Integration:**  Providing external vendors (e.g., equipment providers) with access to relevant ticket information for faster repairs and maintenance.\n\nThe operation returns a JSON response containing ticket ID, status, description, assigned technician, creation date, and resolution details.  This data is vital for efficient fault management and improved operational efficiency across ETB's telecommunications services.\n",
        "tags": [
          "Common Xapi Services"
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/CorrelationId"
          },
          {
            "$ref": "#/components/parameters/SystemId"
          }
        ],
        "responses": {
          "200": {
            "description": "Operation completed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "integer",
                      "example": 200
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/TroubleticketModel"
                      }
                    },
                    "pagination": {
                      "type": "object",
                      "properties": {
                        "total": {
                          "type": "integer"
                        },
                        "page": {
                          "type": "integer"
                        },
                        "limit": {
                          "type": "integer"
                        }
                      }
                    }
                  }
                },
                "example": {
                  "status": "success",
                  "data": {
                    "id": "ETB001234",
                    "name": "Ejemplo ETB",
                    "created": "2025-07-23T10:00:00Z"
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        },
        "security": [
          {
            "etb_oauth2": []
          }
        ]
      },
      "post": {
        "operationId": "post_troubleTicket",
        "summary": "Create Troubleticket",
        "description": "The `/troubleTicket` POST operation within ETB's common-xapi-services allows creation of new trouble tickets for various telecommunication services.  This RESTful API endpoint is crucial for integrating ETB's internal systems and external partner applications.\n\nBusiness use cases include:\n\n* **Customer self-service portal:** Customers report faults (e.g., internet outage, landline issues) directly via a web or mobile application, creating tickets automatically.\n* **Field technician dispatch system:**  Upon ticket creation, the system automatically assigns the ticket to the appropriate technician based on location and expertise, improving response times.\n* **Network monitoring system:** Automated alerts triggered by network anomalies automatically generate trouble tickets for immediate investigation.\n* **Partner integrations:**  Third-party providers (e.g., ISPs) can integrate to report and track faults affecting their services on ETB's network.\n\nThe operation accepts a JSON payload specifying the fault details (service type, location, description, customer information).  Successful submission returns a unique ticket ID for tracking purposes.  This API integrates with ETB's CRM, service management, and network monitoring systems.\n",
        "tags": [
          "Common Xapi Services"
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/CorrelationId"
          },
          {
            "$ref": "#/components/parameters/SystemId"
          }
        ],
        "responses": {
          "201": {
            "description": "Operation completed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "integer",
                      "example": 200
                    },
                    "code": {
                      "type": "string",
                      "example": "Ok"
                    },
                    "message": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string",
                          "example": "Operation completed successfully"
                        }
                      }
                    },
                    "data": {
                      "$ref": "#/components/schemas/TroubleticketModel"
                    }
                  }
                },
                "example": {
                  "id": "ETB001234",
                  "name": "Ejemplo Request ETB",
                  "status": "active",
                  "metadata": {
                    "source": "PORTAL",
                    "timestamp": "2025-07-23T10:00:00Z"
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        },
        "security": [
          {
            "etb_oauth2": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "string"
                  },
                  "name": {
                    "type": "string"
                  },
                  "status": {
                    "type": "string",
                    "enum": [
                      "active",
                      "inactive",
                      "pending"
                    ]
                  },
                  "metadata": {
                    "type": "object",
                    "properties": {
                      "source": {
                        "type": "string"
                      },
                      "timestamp": {
                        "type": "string",
                        "format": "date-time"
                      }
                    }
                  }
                }
              },
              "example": {
                "id": "ETB001234",
                "name": "Ejemplo Request ETB",
                "status": "active",
                "metadata": {
                  "source": "PORTAL",
                  "timestamp": "2025-07-23T10:00:00Z"
                }
              }
            }
          }
        }
      }
    },
    "/{id}": {
      "patch": {
        "operationId": "patch_id",
        "summary": "Modify {Id}",
        "description": "The `/id` PATCH operation within ETB's common-xapi-services allows modification of existing telecommunications resources.  This RESTful endpoint facilitates dynamic updates to subscriber profiles, service configurations, and network elements.  Business use cases include real-time adjustments to bandwidth allocation for broadband customers experiencing congestion, immediate updates to roaming agreements for international travelers, and on-the-fly modifications to call routing based on network performance.  This operation is crucial for proactive network management and personalized service delivery.  It integrates with ETB's billing system for immediate cost adjustments following service changes and with the network monitoring system for automated fault remediation.  The PATCH request utilizes JSON payloads specifying the fields to be updated, ensuring granular control and minimizing unnecessary data transmission.  Successful updates trigger downstream processes, ensuring seamless service continuity and efficient resource utilization across ETB's infrastructure.\n",
        "tags": [
          "Common Xapi Services"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "Unique identifier for id",
            "schema": {
              "type": "string"
            },
            "example": "ETB001234567"
          },
          {
            "$ref": "#/components/parameters/CorrelationId"
          },
          {
            "$ref": "#/components/parameters/SystemId"
          }
        ],
        "responses": {
          "200": {
            "description": "Operation completed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "integer",
                      "example": 200
                    },
                    "code": {
                      "type": "string",
                      "example": "Ok"
                    },
                    "message": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string",
                          "example": "Operation completed successfully"
                        }
                      }
                    },
                    "data": {
                      "$ref": "#/components/schemas/ResourceModel"
                    }
                  }
                },
                "example": {
                  "id": "ETB001234",
                  "name": "Ejemplo Request ETB",
                  "status": "active",
                  "metadata": {
                    "source": "PORTAL",
                    "timestamp": "2025-07-23T10:00:00Z"
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        },
        "security": [
          {
            "etb_oauth2": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "string"
                  },
                  "name": {
                    "type": "string"
                  },
                  "status": {
                    "type": "string",
                    "enum": [
                      "active",
                      "inactive",
                      "pending"
                    ]
                  },
                  "metadata": {
                    "type": "object",
                    "properties": {
                      "source": {
                        "type": "string"
                      },
                      "timestamp": {
                        "type": "string",
                        "format": "date-time"
                      }
                    }
                  }
                }
              },
              "example": {
                "id": "ETB001234",
                "name": "Ejemplo Request ETB",
                "status": "active",
                "metadata": {
                  "source": "PORTAL",
                  "timestamp": "2025-07-23T10:00:00Z"
                }
              }
            }
          }
        }
      }
    },
    "/permission": {
      "post": {
        "operationId": "post_permission",
        "summary": "Create Permission",
        "description": "The `/permission` POST operation within ETB's common-xapi-services allows for dynamic provisioning and management of user access rights across various telecommunications services.  This is crucial for ETB's operational efficiency and security.  Business use cases include: granting a new subscriber access to specific value-added services (VAS) like international roaming or premium SMS; enabling a technician to access customer network information for troubleshooting; or revoking access to a service after a customer cancels their subscription.  This RESTful API integrates with ETB's billing system, customer relationship management (CRM), and network management platforms.  Successful execution returns a permission ID, enabling subsequent auditing and management.  Failure responses provide detailed error codes for troubleshooting integration issues.  This operation is fundamental to ETB's ability to deliver personalized and secure telecommunications services.\n",
        "tags": [
          "Common Xapi Services"
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/CorrelationId"
          },
          {
            "$ref": "#/components/parameters/SystemId"
          }
        ],
        "responses": {
          "201": {
            "description": "Operation completed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "integer",
                      "example": 200
                    },
                    "code": {
                      "type": "string",
                      "example": "Ok"
                    },
                    "message": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string",
                          "example": "Operation completed successfully"
                        }
                      }
                    },
                    "data": {
                      "$ref": "#/components/schemas/PermissionModel"
                    }
                  }
                },
                "example": {
                  "id": "ETB001234",
                  "name": "Ejemplo Request ETB",
                  "status": "active",
                  "metadata": {
                    "source": "PORTAL",
                    "timestamp": "2025-07-23T10:00:00Z"
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        },
        "security": [
          {
            "etb_oauth2": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "string"
                  },
                  "name": {
                    "type": "string"
                  },
                  "status": {
                    "type": "string",
                    "enum": [
                      "active",
                      "inactive",
                      "pending"
                    ]
                  },
                  "metadata": {
                    "type": "object",
                    "properties": {
                      "source": {
                        "type": "string"
                      },
                      "timestamp": {
                        "type": "string",
                        "format": "date-time"
                      }
                    }
                  }
                }
              },
              "example": {
                "id": "ETB001234",
                "name": "Ejemplo Request ETB",
                "status": "active",
                "metadata": {
                  "source": "PORTAL",
                  "timestamp": "2025-07-23T10:00:00Z"
                }
              }
            }
          }
        }
      }
    },
    "/audit": {
      "post": {
        "operationId": "post_audit",
        "summary": "Create Audit",
        "description": "The `/audit` endpoint in ETB's common-xapi-services facilitates logging and auditing of critical telecommunications events.  This POST operation allows various ETB systems to record and timestamp significant actions, ensuring comprehensive audit trails for compliance and troubleshooting.\n\n**Business Use Cases:**  This operation is crucial for tracking changes to customer accounts (e.g., service upgrades, address modifications), network configuration alterations (e.g., routing changes, bandwidth adjustments), and security-related events (e.g., login attempts, access control modifications).  It integrates with ETB's billing system to record payment transactions and with the network management system to log network performance metrics.\n\n**Integration:** The `/audit` endpoint accepts JSON payloads conforming to a predefined schema, enabling seamless integration with diverse ETB applications.  This ensures consistent logging across various systems, providing a centralized repository for auditing and analysis.  Data from this endpoint feeds ETB's security information and event management (SIEM) system for threat detection and reporting.  This robust auditing capability is vital for regulatory compliance and efficient operational management within ETB's telecommunications infrastructure.\n",
        "tags": [
          "Common Xapi Services"
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/CorrelationId"
          },
          {
            "$ref": "#/components/parameters/SystemId"
          }
        ],
        "responses": {
          "201": {
            "description": "Operation completed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "integer",
                      "example": 200
                    },
                    "code": {
                      "type": "string",
                      "example": "Ok"
                    },
                    "message": {
                      "type": "object",
                      "properties": {
                        "message": {
                          "type": "string",
                          "example": "Operation completed successfully"
                        }
                      }
                    },
                    "data": {
                      "$ref": "#/components/schemas/AuditModel"
                    }
                  }
                },
                "example": {
                  "id": "ETB001234",
                  "name": "Ejemplo Request ETB",
                  "status": "active",
                  "metadata": {
                    "source": "PORTAL",
                    "timestamp": "2025-07-23T10:00:00Z"
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        },
        "security": [
          {
            "etb_oauth2": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "string"
                  },
                  "name": {
                    "type": "string"
                  },
                  "status": {
                    "type": "string",
                    "enum": [
                      "active",
                      "inactive",
                      "pending"
                    ]
                  },
                  "metadata": {
                    "type": "object",
                    "properties": {
                      "source": {
                        "type": "string"
                      },
                      "timestamp": {
                        "type": "string",
                        "format": "date-time"
                      }
                    }
                  }
                }
              },
              "example": {
                "id": "ETB001234",
                "name": "Ejemplo Request ETB",
                "status": "active",
                "metadata": {
                  "source": "PORTAL",
                  "timestamp": "2025-07-23T10:00:00Z"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "ErrorResponse": {
        "type": "object",
        "required": [
          "status",
          "code",
          "message"
        ],
        "properties": {
          "status": {
            "type": "integer",
            "description": "HTTP status code",
            "example": 400
          },
          "code": {
            "type": "string",
            "description": "Business-specific error code",
            "example": "VALIDATION_ERROR"
          },
          "message": {
            "type": "object",
            "properties": {
              "message": {
                "type": "string",
                "description": "Detailed error message",
                "example": "Invalid request parameters"
              }
            }
          },
          "cause": {
            "type": "array",
            "description": "Error cause information",
            "items": {
              "type": "object",
              "properties": {
                "origin": {
                  "type": "string",
                  "example": "XAPI-Services"
                },
                "message": {
                  "type": "string",
                  "example": "Validation failed"
                }
              }
            }
          }
        }
      }
    },
    "parameters": {
      "CorrelationId": {
        "name": "X-CORRELATION-ID",
        "in": "header",
        "required": false,
        "description": "Correlation ID for transaction traceability",
        "schema": {
          "type": "string",
          "format": "uuid"
        }
      },
      "SystemId": {
        "name": "systemId",
        "in": "header",
        "required": true,
        "description": "Source system identifier for audit purposes",
        "schema": {
          "type": "string",
          "enum": [
            "MIGRACION",
            "TRANSACCCIONES_OM",
            "MAYORISTAS",
            "OTINICIATIVAS"
          ]
        }
      },
      "ProcessName": {
        "name": "processName",
        "in": "header",
        "required": false,
        "description": "Process name for internal audit",
        "schema": {
          "type": "string"
        }
      }
    },
    "responses": {
      "BadRequest": {
        "description": "Invalid request - Missing or incorrect parameters",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ErrorResponse"
            },
            "example": {
              "status": 400,
              "code": "REQUEST_ERROR",
              "message": {
                "message": "Required query parameters not specified"
              },
              "cause": [
                {
                  "origin": "XAPI-Services",
                  "message": "Validation failed"
                }
              ]
            }
          }
        }
      },
      "Unauthorized": {
        "description": "Unauthorized - Invalid or expired token",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ErrorResponse"
            },
            "example": {
              "status": 401,
              "code": "Unauthorized",
              "message": {
                "message": "Invalid or expired access token"
              }
            }
          }
        }
      },
      "Forbidden": {
        "description": "Access forbidden - Insufficient permissions",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ErrorResponse"
            },
            "example": {
              "status": 403,
              "code": "FORBIDDEN",
              "message": {
                "message": "You do not have permissions to access this resource"
              }
            }
          }
        }
      },
      "NotFound": {
        "description": "Resource not found",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ErrorResponse"
            },
            "example": {
              "status": 404,
              "code": "NOT_FOUND",
              "message": {
                "message": "The requested resource does not exist"
              }
            }
          }
        }
      },
      "InternalServerError": {
        "description": "Internal server error",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ErrorResponse"
            },
            "example": {
              "status": 500,
              "code": "INTERNAL_SERVER_ERROR",
              "message": {
                "message": "Internal error processing the request"
              }
            }
          }
        }
      }
    },
    "securitySchemes": {
      "etb_oauth2": {
        "type": "oauth2",
        "description": "ETB OAuth 2.0 Authentication",
        "flows": {
          "clientCredentials": {
            "tokenUrl": "https://oauth-etb-security-services.us-e2.cloudhub.io/security/v1/access_token",
            "scopes": {
              "read": "Data read access permissions",
              "write": "Write and modification permissions"
            }
          }
        }
      }
    }
  },
  "security": [
    {
      "etb_oauth2": []
    }
  ],
  "tags": [
    {
      "name": "Common Xapi Services",
      "description": "Main operations for Common Xapi Services"
    }
  ]
}